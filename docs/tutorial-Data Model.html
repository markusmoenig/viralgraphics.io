<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Data Model</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Data Model</h1>

    <section>

<header>
    

    <h2>Data Model</h2>
</header>

<article>
    <p>One of the core Visual Graphics features is an easy to use data model which allows you to bind values, inside a model, to widgets, and which supports automatic load / save and undo / redo.</p>
<p>All widgets in Visual Graphics which use a singular value (like an image) can either be used directly, i.e. you supply a value to the widget, or the widgets can be bound to a path inside your data model and the widget will automatically update itself if this value has been changed.</p>

<p>All widgets which use multiple input values, like a list widget, only support usage with the data model.</p>

<h3>Data Collection</h3>

<p>A data collection is the fundamental object which holds values which can be bound to widgets. An application can have multiple data collections, you can create a data collection like this.</p>

<pre class="prettyprint source"><code>var dc=VG.Data.Collection( &quot;MainData&quot; );</code></pre><p>If you want to use this data collection automatically for loading and saving your application data and for undo and redo, you need to register it to the <a href="VG.UI.Workspace.html">workspace</a>.</p>

<pre class="prettyprint source"><code>workspace.registerDataCollection( dc, VG.UI.DataCollectionRole.LoadSaveRole | VG.UI.DataCollectionRole.UndoRedoRole );</code></pre><p>The <a href="VG.UI.Workspace.html">workspace</a> object is passed as a first argument to your vgMain() function, your main entry point for every Visual Graphics application.</p>

<h3>Using Paths inside a Data Collection</h3>

<p>You can assign values to your data collection by just assigning them to the properties of the data collection. For example we want to create a list widget and list widgets hold their data in an array, so we create a property like this:<p>

<code>dc.items=[];</code>

<p>&quot;items&quot; is called the <i>path</i> to the value. Paths can be nested, for example a path of &quot;items.image&quot; would point to the image property of the currently selected object in items.</p>

<h3>Binding your Widgets</h3>

<p>You can use the bind() function of every widget to bind it to a path inside your data collection, let's have a look at an example. Imagine you want to create a database of your contacts and each contact should have an image associated with it. You would do something like:</p>

<pre class="prettyprint source"><code>var dc=VG.Data.Collection( &quot;MainData&quot; );
dc.contacts=[];

var listWidget=VG.UI.ListWidget();
var controller=listWidget.bind( dc, &quot;contacts&quot; );

var imageView=VG.UI.Image();
imageView.bind( dc, &quot;contacts.image&quot; );</code></pre><h3>Controllers</h3>

<p>As you can see, the VG.UI.ListWidget returns an controller object when you bind it to &quot;contaccts&quot;. As the list widget handles multiple items, it needs to have a controller, in the case of the list widget it will be a <a href="VG.Controller.Array.html">VG.Controller.Array</a> controller. Controllers are needed if you want to add, remove or otherwise change the objects managed by the controller. For example to add an object to contacts:</p>

<pre class="prettyprint source"><code>Contact=function()
{    
    this.image=null;
};

controller.add( new Contact() );</code></pre><p>It is good practise to create default values for every value you use inside an object, like in this case the image property. You can also indicate to the controller which class to create on add() operations. The following code adds a new contact when a button is pressed.</p>

<pre class="prettyprint source"><code>controller.contentClassName=&quot;Contact&quot;;

var addButton=VG.UI.ToolButton( &quot;Add&quot; );
addButton.clicked=function() {
    var item=controller.add();// new Contact() );
    controller.selected=item;
}.bind( this );</code></pre><p>This code creates a new tool button, when the tool button is clicked it creates a new contact. As we supplied the <i>contentClassName</i> property to the controller, we did not need to supply a class object, the controller will add it automatically.</p>

<p>Controllers of course support more functionality than only adding items, like inserting and removing items. Please have look at the API reference of your controller.<p>

<p>You can also add observers to a controller, these observers will notify you when specific actions occur inside the controller, like when the selection has changed:</p>

<pre class="prettyprint source"><code>controller.addObserver( &quot;selectionChanged&quot;, function {
    var selected=constroller.selected;
    var selection=controller.selection; 
    console.log( &quot;The new current object of the selection is&quot;, selected );
} );</code></pre><h3>Tree Controller</h3>

<p>The tree controller handles hierarchical trees of objects and is used for example by tree widgets. A short example:</p>

<pre class="prettyprint source"><code>var dc=VG.Data.Collection( &quot;MainData&quot; );
dc.items=[];

var treeWidget=VG.UI.TreeWidget();
var controller=treeWidget.bind( dc, &quot;items&quot; );

controller.addObserver( &quot;selectionChanged&quot;, function() {
    var item=this.controller.selected;
    VG.log( &quot;Selected \&quot;&quot; + item.text + &quot;\&quot; at index &quot; + this.controller.indexOf( item ) );
}.bind( this ) );

function folder( text, open, selectable ) {
    this.text=text;
    this.children=[];
    this.open=open;
    this.selectable=selectable;
}

function item( text, folder, open ) {
    this.text=text;
}

controller.add( &quot;&quot;, new folder( &quot;Folder #1&quot;, true ) );
controller.add( &quot;0&quot;, new item( &quot;First Item&quot; ) );
controller.add( &quot;0&quot;, new folder( &quot;Selectable Subfolder&quot;, false, true ) );
controller.add( &quot;0.1&quot;, new item( &quot;Second Item&quot; ) );
controller.add( &quot;&quot;, new item( &quot;Third Item&quot; ) );</code></pre><p>Note that the add() function of the controller takes an addition argument, the fully qualified string index of the path to add the item to where &quot;&quot; indicates the root level of the hierachy.</p>

<h3>Summary</h3>

<p>The data model of Visual Graphics allows your application to bind widgets to a light-weight data model, providing a powerful and flexible way to add automatic project based load/save as well as automated undo/redo functionality to your applicatoon.</p>

<p>Please have a look at the supplied addressbook example application for further example code.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="VG.Canvas.html">Canvas</a></li><li><a href="VG.Controller.Array.html">Array</a></li><li><a href="VG.Controller.Base.html">Base</a></li><li><a href="VG.Controller.Tree.html">Tree</a></li><li><a href="VG.Core.Color.html">Color</a></li><li><a href="VG.Core.Image.html">Image</a></li><li><a href="VG.Core.ImagePool.html">ImagePool</a></li><li><a href="VG.Core.Margin.html">Margin</a></li><li><a href="VG.Core.NormalizedColor.html">NormalizedColor</a></li><li><a href="VG.Core.Point.html">Point</a></li><li><a href="VG.Core.Rect.html">Rect</a></li><li><a href="VG.Core.Size.html">Size</a></li><li><a href="VG.Core.Timer.html">Timer</a></li><li><a href="VG.Core.TypedArray.html">TypedArray</a></li><li><a href="VG.Events.MouseDownEvent.html">MouseDownEvent</a></li><li><a href="VG.Events.MouseMoveEvent.html">MouseMoveEvent</a></li><li><a href="VG.Events.MouseUpEvent.html">MouseUpEvent</a></li><li><a href="VG.Math.Aabb.html">Aabb</a></li><li><a href="VG.Math.Matrix4.html">Matrix4</a></li><li><a href="VG.Math.Quat.html">Quat</a></li><li><a href="VG.Math.Vector2.html">Vector2</a></li><li><a href="VG.Math.Vector3.html">Vector3</a></li><li><a href="VG.Math.Vector4.html">Vector4</a></li><li><a href="VG.Render.BoxMesh.html">BoxMesh</a></li><li><a href="VG.Render.Camera.html">Camera</a></li><li><a href="VG.Render.Material.html">Material</a></li><li><a href="VG.Render.Mesh.html">Mesh</a></li><li><a href="VG.Render.MtlMaterial.html">MtlMaterial</a></li><li><a href="VG.Render.OrbitCamera.html">OrbitCamera</a></li><li><a href="VG.Render.SceneManager.html">SceneManager</a></li><li><a href="VG.Render.SceneNode.html">SceneNode</a></li><li><a href="VG.Render.SimpleMaterial.html">SimpleMaterial</a></li><li><a href="VG.Render.SphereMesh.html">SphereMesh</a></li><li><a href="VG.UI.Dialog.html">Dialog</a></li><li><a href="VG.UI.DockWidget.html">DockWidget</a></li><li><a href="VG.UI.HtmlView.html">HtmlView</a></li><li><a href="VG.UI.Image.html">Image</a></li><li><a href="VG.UI.LabelLayout.html">LabelLayout</a></li><li><a href="VG.UI.Layout.html">Layout</a></li><li><a href="VG.UI.RenderWidget.html">RenderWidget</a></li><li><a href="VG.UI.SectionBar.html">SectionBar</a></li><li><a href="VG.UI.SectionBarButton.html">SectionBarButton</a></li><li><a href="VG.UI.SectionBarSeparator.html">SectionBarSeparator</a></li><li><a href="VG.UI.SectionToolBar.html">SectionToolBar</a></li><li><a href="VG.UI.SplitLayout.html">SplitLayout</a></li><li><a href="VG.UI.StackedLayout.html">StackedLayout</a></li><li><a href="VG.UI.StatusDialog.html">StatusDialog</a></li><li><a href="VG.UI.Widget.html">Widget</a></li><li><a href="VG.UI.Window.html">Window</a></li><li><a href="VG.UI.Workspace.html">Workspace</a></li></ul><h3>Namespaces</h3><ul><li><a href="VG.html">VG</a></li><li><a href="VG.context.html">context</a></li><li><a href="VG.Controller.html">Controller</a></li><li><a href="VG.Core.html">Core</a></li><li><a href="VG.Events.html">Events</a></li><li><a href="VG.Import.html">Import</a></li><li><a href="VG.Math.html">Math</a></li><li><a href="VG.Render.html">Render</a></li><li><a href="VG.UI.html">UI</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-Data Model.html">Data Model</a></li><li><a href="tutorial-Layouts.html">Layouts</a></li><li><a href="tutorial-Widget Basics.html">Widget Basics</a></li><li><a href="tutorial-Workspace.html">Workspace</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Jul 26 2016 11:47:29 GMT+0700 (ICT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>